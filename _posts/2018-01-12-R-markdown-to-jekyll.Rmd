---
layout: post
title:  "Getting R markdown to play with jekyll"
date:   2018-01-12 06:17:04 -0600
mathjax: true
tags: R blog
---

This post is an attempt to get [R
Markdown](http://www.rstudio.org/docs/authoring/using_markdown) to render on a
`jekyll` website.  The prolific [Yihui Xie](http://yihui.name/) has a [github
repository yihui/blogdown](https://github.com/yihui/blogdown-jekyll) to
demonstrate how to do this using `blogdown` and `knitr`. There is also some
[documentation available](https://bookdown.org/yihui/blogdown/jekyll.html).
Jekyll isn't well supported by blogdown so I needed to hack a few things
together to get them to work well.  

<!--more-->

I'm going to test out a few things including making sure that plots and
equations show up on the website. The code below mainly follows some [example
code by Jeromy Anglin](https://gist.github.com/jeromyanglim/2716336) that I
found while learning online. 


## Prepare for analyses
```{r }
set.seed(1234)
library(ggplot2)
```


## Basic console output
To insert an R code chunk, you can type it manually or just press `Chunks - Insert chunks` or use the shortcut key. This will produce the following code chunk:

    ```{r}
    
    ```

Pressing tab when inside the braces will bring up code chunk options.

The following R code chunk labelled `basicconsole` is as follows:

    ```{r }
    x <- 1:10
    y <- round(rnorm(10, x, 1), 2)
    df <- data.frame(x, y)
    df
    ```
    
The code chunk input and output is then displayed as follows:

```{r basicconsole}
x <- 1:10
y <- round(rnorm(10, x, 1), 2)
df <- data.frame(x, y)
df
```

## Plots
Images generated by `knitr` are saved in a figures folder. However, they also appear to be represented in the HTML output using a [data URI scheme]( http://en.wikipedia.org/wiki/Data_URI_scheme). This means that you can paste the HTML into a blog post or discussion forum and you don't have to worry about finding a place to store the images; they're embedded in the HTML.

### Simple plot
Here is a basic plot using base graphics:

```{r }
plot(x)
```

```{r simpleplot}
plot(x)
```

Note that unlike traditional Sweave, there is no need to write `fig=TRUE`.



### `ggplot2` plot
ggplot plots work well:

```{r ggplot2ex}
qplot(x, y, data=df, geom="point") + geom_line(colour="red")
```

## R Code chunk features
### Create Markdown code from R
The following code hides the command input (i.e., `echo=FALSE`), and outputs the content directly as code (i.e., `results=asis`, which is similar to `results=tex` in Sweave).


    ```{r , results='asis', echo=FALSE}
    cat("Here are some dot points\n\n")
    cat(paste("* The value of y[", 1:3, "] is ", y[1:3], sep="", collapse="\n"))
    ```

```{r dotpointprint, results='asis', echo=FALSE}
cat("Here are some dot points\n\n")
cat(paste("* The value of y[", 1:3, "] is ", y[1:3], sep="", collapse="\n"))
```

### Create Markdown table code from R
    ```{r , results='asis', echo=FALSE}
    cat("x | y", "--- | ---", sep="\n")
    cat(apply(df, 1, function(X) paste(X, collapse=" | ")), sep = "\n")
    ```

```{r createtable, results='asis', echo=FALSE}
cat("x | y", "--- | ---", sep="\n")
cat(apply(df, 1, function(X) paste(X, collapse=" | ")), sep = "\n")
```

### Control output display
The folllowing code supresses display of R input commands (i.e., `echo=FALSE`)
and removes any preceding text from console output (`comment=""`; the default is `comment="##"`).

    ```{r echo=FALSE, comment="", echo=FALSE}
    head(df)
    ```

```{r echo=FALSE, comment="", echo=FALSE}
head(df)
```

### Test syntax highlighting

```{r, echo=TRUE}
library(MASS)
MASS::fbeta
# testing a comment
print(paste("This is a test", "of string coloring", sep=" "))
a <- c(1,2,3)
b <- "red"
```



### Control figure size
The following is an example of a smaller figure using `fig.width` and `fig.height` options.

```{r , fig.width=3, fig.height=3}
plot(x)
```

```{r smallplot, fig.width=3, fig.height=3}
plot(x)
```

## Basic markdown functionality
For those not familiar with standard [Markdown](http://daringfireball.net/projects/markdown/), the following may be useful.
See the source code for how to produce such points. However, RStudio does include a Markdown quick reference button that adequatly covers this material.

### Dot Points
Simple dot points:

* Point 1
* Point 2
* Point 3

and numeric dot points:

1. Number 1
2. Number 2
3. Number 3

and nested dot points:

* A
    * A.1
    * A.2
* B
    * B.1
    * B.2


### Equations
Equations are included by using LaTeX notation and including them either between single dollar signs (inline equations) or double dollar signs (displayed equations).

There are inline equations such as \\( y_i = \alpha + \beta x_i + e_i \\).

And displayed formulas:

$$\frac{1}{1+\exp(-x)}$$



### Tables
Tables can be included using the following notation

A  | B | C
--- | --- | ---
1  | Male | Blue
2  | Female | Pink

### Hyperlinks

* Here is a link to [Wikipedia](https://www.wikipedia.org).

### Images
Here's an example image:

![Goddess Hathor giving an Ankh to Nefertari, by unknown, Wikipedia, Public
Domain](https://upload.wikimedia.org/wikipedia/commons/1/1d/Ankh_isis_nefertari.jpg)


### Code
Here is Markdown R code chunk displayed as code:

    ```{r}
    x <- 1:10
    x
    ```
    


And then there's inline code such as `x <- 1:10`.

### Quote
Let's quote some stuff:

> To be, or not to be, that is the question:
> Whether 'tis nobler in the mind to suffer
> The slings and arrows of outrageous fortune,


## Conclusion

* R Markdown is awesome. 
    * The ratio of markup to content is excellent. 
    * For exploratory analyses, blog posts, and the like R Markdown will be a powerful productivity booster. 
    * For journal articles, LaTeX will presumably still be required.


### Equivalent of Sexpr
**Question:** Is there [an R Markdown equivalent to Sexpr in Sweave?](http://stackoverflow.com/q/10629416/180892).

**Answer:** Include the code between brackets of "backick r space" and "backtick". 
E.g., R calculates this in the source code inline 2 + 2 = `r 2 + 2` .
